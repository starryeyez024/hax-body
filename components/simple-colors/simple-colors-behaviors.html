<!--
`simple-colors-behaviors`
A set of theming and accent color behaviors for components.
@microcopy - the mental model for this element
 - 
 - 
-->
<script>
  window.simpleColorsBehaviors = window.simpleColorsBehaviors || {};
  window.simpleColorsBehaviors = {
    properties: {
      /** 
        * Accent color on UI. Default is greyscale.
        */ 
      accentColor: {
        type: String,
        value: null,
        reflectToAttribute: true,
      },
      /** 
        * Dark colors for UI? Default is false (light).
        */
      dark: {
        type: Boolean,
        value: false,
        reflectToAttribute: true
      },
    },

    observers: ['setTheme(accentColor,dark)'],
    /** 
     * Set color variables. Set variables for element and for slotted content.
     */
    created: function(){
      Polymer.SimpleColorsUtility.requestAvailability();
      this.__hexCodes = {
        "grey": ['#000000','#111111','#222222','#444444','#666666','#999999','#bbbbbb','#dddddd','#eeeeee','#ffffff'],
        "accent": ['#000000','#111111','#222222','#dddddd','#eeeeee','#ffffff'],
        "red": ['#a00000','#c70000','#ee0000','#ff2222','#ff4444','#ff6666'],
        "pink": ['#9a006e','#bb0080','#da0099','#ff2077','#ff4089','#ff5b9a'],
        "purple": ['#44006f','#6300a0','#7200ba','#dd22ee','#e75cff','#ea75ff'],
        "deepPurple": ['#1d005c','#2b0082','#32009d','#7f5fff','#9175FF','#9e86ff'],
        "indigo": ['#000f72','#00149a','#001dc4','#2277ff','#428BFF','#5da1ff'],
        "blue": ['#002b63','#0041a2','#0156c6','#0091ff','#199fff','#30aaff'],
        "lightBlue": ['#002f50','#00547e','#0075a7','#00c0ff','#22cbff','#3cd2ff'],
        "cyan": ['#00393c','#005b61','#017f8a','#22f0f0','#4fffff','#6affff'],
        "teal": ['#003930','#006559','#018e7b','#00ffa6','#1bffaf','#5dffc1'],
        "green": ['#022709','#105e26','#128737','#00f956','#38FF61','#7bff86'],
        "lightGreen": ['#122d09','#2f5c16','#438316','#6fff00','#89FF2E','#A0FF52'],
        "lime": ['#594700','#716000','#877000','#aeff00','#b4ff18','#beff4d'],
        "yellow": ['#634200','#855400','#965c00','#f6f600','#fcfc38','#ffff60'],
        "amber": ['#673800','#8F4F00','#a85c00','#dfa400','#e3b030','#ffcb62'],
        "orange": ['#8c2a00','#a83500','#bf3900','#ff9625','#ff8800','#ff9625'],
        "deepOrange": ['#820400','#a70800','#c61400','#ff7b42','#ff7738','#ff7b42'],
        "brown": ['#442d26','#5D4037','#85574a','#a47060','#b67f6f','#c28a7b'],
        "blueGrey": ['#2f4149','#455a64','#56707c','#699096','#75989F','#81a3a9']
      };
      this.reset();
    },

    setTheme: function(accentColor,dark){
      if(accentColor!== null && accentColor!==""){
        let prop = accentColor.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase(); });
        if(this.__lightTheme.hasOwnProperty(prop)){
          this.__lightTheme.accent = this.__lightTheme[prop].slice();
          this.__darkTheme.accent = this.__darkTheme[prop].slice();
        } else {
          this.__lightTheme.accent = this.__defaultAccent.slice();
          this.__lightTheme.accent = this.__defaultAccent.slice().reverse();
        }
      }
      this.setThemeProps('--simple-colors-light-theme-',this.__lightTheme);
      this.setThemeProps('--simple-colors-dark-theme-',this.__darkTheme);
      
      if(dark){
        this.setThemeProps('--simple-colors-',this.__darkTheme);
      } else {
        this.setThemeProps('--simple-colors-',this.__lightTheme);
        
      }
    },
    
    _setProps: function(prefix,colors){
      prefix = prefix.replace('-grey','').replace( /([a-z])([A-Z])/g, '$1-$2' ).toLowerCase()
      for(let i=0; i<colors.length; i++){
        let half = colors.length/2, suffix = i < half ? '-foreground'+(i+1) : '-background'+(colors.length-i);
        //console.log('setting '+prefix+suffix+' to '+colors[i]);
        if (this.customStyle !== null && this.customStyle[prefix+suffix] !== null) this.customStyle[prefix+suffix] = colors[i];
      }
      this.updateStyles();
    },
    setThemeProps: function(themePrefix,theme){
      for (var property in theme) {
        if (theme.hasOwnProperty(property)) {
          this._setProps(themePrefix+property,theme[property]);
        }
      }
    },
    reset: function(){
      let setThemeProps= function(themePrefix,theme){
        for (var property in theme) {
          if (theme.hasOwnProperty(property)) {
            this._setProps(themePrefix+property,theme[property]);
          }
        }
      };
      this.__lightTheme = this.__hexCodes;
      this.__darkTheme = {
        "grey": this.__lightTheme.grey.slice().reverse(),
        "accent": this.__lightTheme.accent.slice().reverse(),
        "red": this.__lightTheme.red.slice().reverse(),
        "pink": this.__lightTheme.pink.slice().reverse(),
        "purple": this.__lightTheme.purple.slice().reverse(),
        "deepPurple": this.__lightTheme.deepPurple.slice().reverse(),
        "indigo": this.__lightTheme.indigo.slice().reverse(),
        "blue": this.__lightTheme.blue.slice().reverse(),
        "lightBlue": this.__lightTheme.lightBlue.slice().reverse(),
        "cyan": this.__lightTheme.cyan.slice().reverse(),
        "teal": this.__lightTheme.teal.slice().reverse(),
        "green": this.__lightTheme.green.slice().reverse(),
        "lightGreen": this.__lightTheme.lightGreen.slice().reverse(),
        "lime": this.__lightTheme.lime.slice().reverse(),
        "yellow": this.__lightTheme.yellow.slice().reverse(),
        "amber": this.__lightTheme.amber.slice().reverse(),
        "orange": this.__lightTheme.orange.slice().reverse(),
        "deepOrange": this.__lightTheme.deepOrange.slice().reverse(),
        "brown": this.__lightTheme.brown.slice().reverse(),
        "blueGrey": this.__lightTheme.blueGrey.slice().reverse(),
      };
      this.setThemeProps('--simple-colors-',this.__lightTheme);
      this.setThemeProps('--simple-colors-light-theme-',this.__lightTheme);
      this.setThemeProps('--simple-colors-dark-theme-',this.__darkTheme);
    },
  };
</script>

